search_papers_task:
  description: >
    Realizar uma busca acadêmica sistemática, persistente e criteriosa
    de papers científicos relevantes sobre "{topic}", com foco em
    publicações recentes, metodologicamente robustas e adequadas
    para análise técnica profunda.

    ESTA TAREFA É A BASE DE TODO O PIPELINE.
    Tente buscar pelo menos 4 papers relevantes.
    A qualidade do output impacta diretamente todas as análises posteriores.

  CONTEXTO:
    - Prioridade absoluta: qualidade científica, recência e acesso a PDF completo.
    - A busca deve ser EXAUSTIVA dentro das ferramentas disponíveis.

  PROCESSO OBRIGATÓRIO:

    ETAPA 1 — BUSCA PRIMÁRIA (OBRIGATÓRIA):
      - Utilizar EXCLUSIVAMENTE a ferramenta `serper_scholar_tool`.
      - Parâmetros obrigatórios:
        - query: string do topic "{topic}"
        - num: {max_papers}
        - gl: country da busca (br, us, etc.), default é 'br', só use outra se for especificado no input.
      - Executar NO MÍNIMO 3 queries diferentes, variando:
        - termos principais
        - sinônimos técnicos
        - abordagens metodológicas
      - Parâmetros obrigatórios:
        - query: string do topic "{topic}"
        - num: {max_papers}
      - Priorizar resultados com:
        - ano >= 2020
        - link direto para PDF
        - venues reconhecidos (Nature, Science, IEEE, ACM, Elsevier, arXiv, SciELO)

    CRITÉRIO DE SUCESSO DA ETAPA 1:
      - Pelo menos 3 papers relevantes com PDF acessível.
      - Caso contrário, a etapa é considerada FALHA PARCIAL.

    ETAPA 2 — BUSCA SECUNDÁRIA (FALLBACK CONDICIONAL):
      - Executar SOMENTE se a Etapa 1 falhar.
      - Utilizar a ferramenta `openalex_search_tool`.
      - Priorizar:
        - Open Access = true
        - artigos com abstract completo
      - Executar múltiplas queries, alinhadas às da Etapa 1.

    ETAPA 3 — BUSCA TERCIÁRIA (OPCIONAL E JUSTIFICADA):
      - Utilizar Semantic Scholar APENAS se:
        - não houver papers suficientes após Etapas 1 e 2
      - Documentar explicitamente o motivo do uso.

    ETAPA 4 — EXPANSÃO POR CITAÇÕES:
      - Se identificar paper altamente citado ou seminal:
        - buscar trabalhos que o citem
        - ou extensões diretas da mesma linha de pesquisa
      - Registrar a relação entre os trabalhos.

  RESTRIÇÕES:
    - Não incluir papers sem relação direta com "{topic}".
    - Não incluir artigos sem PDF acessível.
    - Evitar repetir tentativas idênticas em caso de erro técnico.
    - So use a proxima ferramenta se a ferramenta anterior falhar tecnicamente.
    - Se uma ferramenta falhar tecnicamente, avançar imediatamente para a próxima.

  DOCUMENTAÇÃO OBRIGATÓRIA:
    - Registrar limitações encontradas (ex: escassez de papers recentes).

  expected_output: >
    Lista estruturada com DOIS grupos:

    1. PAPERS ACEITOS:
       - Título completo
       - Autores
       - Ano
       - Venue
       - URL do PDF
       - Resumo ORIGINAL do paper

    2. PAPERS DESCARTADOS OU INCOMPLETOS:
       - Título
       - URL
       - Motivo do descarte
       
synthesize_report_task:
  description: >
    Produzir um relatório acadêmico completo e formal a partir das análises
    individuais dos papers, organizando grandes volumes de informação técnica
    sem perda de profundidade, dados ou nuances metodológicas.

    CONTEXTO:
    Este relatório será utilizado posteriormente por outros sistemas para
    sumarização e reinterpretação. Portanto, a preservação integral do conteúdo
    original é obrigatória. Porem se nao houver papers enviados, enviar um relatório vazio.

    PROCESSO OBRIGATÓRIO:
    1. Utilizar o texto completo gerado pelo Analista de Literatura.
    2. NÃO resumir, condensar ou reescrever análises técnicas extensas.
    3. Para cada paper, extrair o resumo/abstract COMPLETO (mínimo 100 caracteres):
      - Buscar o resumo no texto analisado pelo Analista de Literatura
      - Se não encontrar explicitamente, usar a seção "Introdução e Contexto" como base
      - NUNCA usar textos genéricos ou placeholders como "Resumo disponível no link"
      - O resumo deve ser informativo e descrever o conteúdo real do paper
    4. Organizar o conteúdo em uma estrutura acadêmica clara e coerente.
    5. Garantir consistência entre autores, anos, métodos e conclusões.
    6. Documentar explicitamente limitações, lacunas e dificuldades encontradas.

    RESTRIÇÕES CRÍTICAS:
    - Textos curtos ou superficiais invalidam a tarefa.
    - Se houver incerteza, optar por manter mais informação, não menos.
    - Se algum campo não puder ser preenchido, usar null ou deixar vazio.
    
  expected_output: >
    Se não houver papers, enviar um relatório vazio.

    Mas se houver papers, enviar um objeto AcademicReport contendo obrigatoriamente:

    - tema: "{topic}"
    - introducao_geral (texto extenso e contextualizado)
    - papers (lista completa com análises profundas de cada paper)
    - analise_comparativa_completa (cruzamento detalhado entre os papers)
    - insights
    - tendencias_identificadas
    - gaps_pesquisa
    - metodologias_predominantes
    - conclusoes
    - recomendacoes
    - limitacoes

    Ao final, incluir a seção:
    "## Referências Bibliográficas"
    listando Título completo e URL de todos os papers analisados.
