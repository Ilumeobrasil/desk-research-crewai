search_papers_task:
  description: >
    Realizar uma busca acadêmica sistemática, persistente e criteriosa
    de papers científicos relevantes sobre "{topic}", com foco em
    publicações recentes, metodologicamente robustas e adequadas
    para análise técnica profunda.

    ESTA TAREFA É A BASE DE TODO O PIPELINE.
    A qualidade do output impacta diretamente todas as análises posteriores.

  CONTEXTO:
    - Prioridade absoluta: qualidade científica, recência e acesso a PDF completo.
    - A busca deve ser EXAUSTIVA dentro das ferramentas disponíveis.

  PROCESSO OBRIGATÓRIO:

    ETAPA 1 — BUSCA PRIMÁRIA (OBRIGATÓRIA):
      - Utilizar EXCLUSIVAMENTE a ferramenta `serper_scholar_tool`.
      - Executar NO MÍNIMO 3 queries diferentes, variando:
        - termos principais
        - sinônimos técnicos
        - abordagens metodológicas
      - Parâmetros obrigatórios:
        - query: string gerada via query engineering
        - num: {max_papers}
      - Priorizar resultados com:
        - ano >= 2020
        - link direto para PDF
        - venues reconhecidos (Nature, Science, IEEE, ACM, Elsevier, arXiv, SciELO)

    CRITÉRIO DE SUCESSO DA ETAPA 1:
      - Pelo menos 3 papers relevantes com PDF acessível.
      - Caso contrário, a etapa é considerada FALHA PARCIAL.

    ETAPA 2 — BUSCA SECUNDÁRIA (FALLBACK CONDICIONAL):
      - Executar SOMENTE se a Etapa 1 falhar.
      - Utilizar a ferramenta `openalex_search_tool`.
      - Priorizar:
        - Open Access = true
        - artigos com abstract completo
      - Executar múltiplas queries, alinhadas às da Etapa 1.

    ETAPA 3 — BUSCA TERCIÁRIA (OPCIONAL E JUSTIFICADA):
      - Utilizar Semantic Scholar APENAS se:
        - não houver papers suficientes após Etapas 1 e 2
      - Documentar explicitamente o motivo do uso.

    ETAPA 4 — EXPANSÃO POR CITAÇÕES:
      - Se identificar paper altamente citado ou seminal:
        - buscar trabalhos que o citem
        - ou extensões diretas da mesma linha de pesquisa
      - Registrar a relação entre os trabalhos.

  RESTRIÇÕES:
    - Não incluir papers sem relação direta com "{topic}".
    - Não incluir artigos sem PDF acessível.
    - Evitar repetir tentativas idênticas em caso de erro técnico.
    - Se uma ferramenta falhar tecnicamente, avançar imediatamente para a próxima.

  DOCUMENTAÇÃO OBRIGATÓRIA:
    - Registrar limitações encontradas (ex: escassez de papers recentes).

  expected_output: >
    Lista estruturada com DOIS grupos:

    1. PAPERS ACEITOS:
       - Título completo
       - Autores
       - Ano
       - Venue
       - URL do PDF
       - Resumo ORIGINAL do paper

    2. PAPERS DESCARTADOS OU INCOMPLETOS:
       - Título
       - URL
       - Motivo do descarte
       
analyze_literature_task:
  description: >
    Analisar de forma INDIVIDUAL, CRÍTICA e EXAUSTIVA cada paper acadêmico recebido,
    utilizando exclusivamente seus PDFs completos por meio da ferramenta
    pdf_analyzer.

    CONTEXTO:
    Esta tarefa tem como objetivo extrair o máximo de informação técnica possível,
    preservando integralmente a complexidade, os dados e as nuances metodológicas
    de cada paper. Nenhuma forma de resumo superficial é aceitável.

    PROCESSO OBRIGATÓRIO:
    1. Para cada paper recebido, verificar se a URL aponta para um PDF direto
       (ex: termina em ".pdf" ou contém "/pdf/").
    2. Executar a ferramenta:
       pdf_analyzer(url=URL_REAL_DO_PAPER) para cada paper recebido.
    3. Ler TODO o conteúdo extraído com atenção máxima.
    4. Extrair e documentar detalhes técnicos completos: metodologia, métricas,
       números, parâmetros, resultados quantitativos, limitações e contribuições.
    5. Gerar a referência ABNT COMPLETA antes de qualquer análise textual.
    6. Se um paper não puder ser acessado (erro 403, 404, paywall, etc.):
    - Documentar o erro específico (ex: "403 Forbidden", "404 Not Found", "Paywall")
    - Prosseguir imediatamente com os demais papers
    - NÃO interromper o fluxo por causa de um único paper inacessível

    RESTRIÇÕES CRÍTICAS (ZERO TOLERÂNCIA):
    - É PROIBIDO usar reticências ("...") ou truncar texto.
    - É PROIBIDO resumir seções complexas.
    - Cada paper deve conter no mínimo 1500 palavras de análise.
    - URLs fictícias ou de exemplo são estritamente proibidas.

  expected_output: >
    Para CADA paper analisado, produzir uma seção completa em Markdown contendo:

    0. REFERÊNCIA ABNT COMPLETA

    1. Introdução e Contexto
      (4–6 parágrafos densos, explicando motivação e problema específico)

    2. Fundamentação Teórica
      (4–5 parágrafos técnicos, com teorias, autores e fórmulas quando aplicável)

    3. Metodologia Detalhada
      (6–8 parágrafos técnicos descrevendo passo a passo experimental)

    4. Resultados Quantitativos e Qualitativos
      (5–7 parágrafos com números exatos, métricas, p-values quando disponíveis)

    5. Discussão e Interpretação
      (4–5 parágrafos críticos sobre impacto e significado dos resultados)

    6. Contribuições Originais
      (3–4 parágrafos detalhando o que o paper acrescenta à área)

    7. Limitações e Trabalhos Futuros
      (3–4 parágrafos honestos e tecnicamente fundamentados)

    8. Avaliação Crítica do Analista
      (2–3 parágrafos avaliando rigor científico e confiabilidade)

synthesize_report_task:
  description: >
    Produzir um relatório acadêmico completo e formal a partir das análises
    individuais dos papers, organizando grandes volumes de informação técnica
    sem perda de profundidade, dados ou nuances metodológicas.

    CONTEXTO:
    Este relatório será utilizado posteriormente por outros sistemas para
    sumarização e reinterpretação. Portanto, a preservação integral do conteúdo
    original é obrigatória.

    PROCESSO OBRIGATÓRIO:
    1. Utilizar o texto completo gerado pelo Analista de Literatura.
    2. NÃO resumir, condensar ou reescrever análises técnicas extensas.
    3. Para cada paper, extrair o resumo/abstract COMPLETO (mínimo 100 caracteres):
      - Buscar o resumo no texto analisado pelo Analista de Literatura
      - Se não encontrar explicitamente, usar a seção "Introdução e Contexto" como base
      - NUNCA usar textos genéricos ou placeholders como "Resumo disponível no link"
      - O resumo deve ser informativo e descrever o conteúdo real do paper
    4. Organizar o conteúdo em uma estrutura acadêmica clara e coerente.
    5. Garantir consistência entre autores, anos, métodos e conclusões.
    6. Documentar explicitamente limitações, lacunas e dificuldades encontradas.

    RESTRIÇÕES CRÍTICAS:
    - Textos curtos ou superficiais invalidam a tarefa.
    - Se houver incerteza, optar por manter mais informação, não menos.
    - Se algum campo não puder ser preenchido, usar null ou deixar vazio.
    
  expected_output: >
    Objeto AcademicReport contendo obrigatoriamente:

    - tema (texto exato do tópico pesquisado)
    - introducao_geral (texto extenso e contextualizado)
    - papers (lista completa com análises profundas de cada paper)
    - analise_comparativa_completa (cruzamento detalhado entre os papers)
    - insights
    - tendencias_identificadas
    - gaps_pesquisa
    - metodologias_predominantes
    - conclusoes
    - recomendacoes
    - limitacoes

    Ao final, incluir a seção:
    "## Referências Bibliográficas"
    listando Título completo e URL de todos os papers analisados.
